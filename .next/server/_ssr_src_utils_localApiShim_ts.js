"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_utils_localApiShim_ts";
exports.ids = ["_ssr_src_utils_localApiShim_ts"];
exports.modules = {

/***/ "(ssr)/./src/utils/localApiShim.ts":
/*!***********************************!*\
  !*** ./src/utils/localApiShim.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enableLocalMode: () => (/* binding */ enableLocalMode)\n/* harmony export */ });\n/* harmony import */ var _utils_supabase_info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/supabase/info */ \"(ssr)/./utils/supabase/info.tsx\");\n/* harmony import */ var _localStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./localStore */ \"(ssr)/./src/utils/localStore.ts\");\n\n\nfunction jsonResponse(obj, init = 200) {\n    return new Response(JSON.stringify(obj), {\n        status: init,\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n}\nfunction notFound(msg = \"Not found\") {\n    return jsonResponse({\n        error: msg\n    }, 404);\n}\nfunction badRequest(msg = \"Bad request\") {\n    return jsonResponse({\n        error: msg\n    }, 400);\n}\nfunction unauthorized(msg = \"Unauthorized\") {\n    return jsonResponse({\n        error: msg\n    }, 401);\n}\nfunction enableLocalMode() {\n    if (true) return;\n    const base = `https://${_utils_supabase_info__WEBPACK_IMPORTED_MODULE_0__.projectId}.supabase.co/functions/v1/make-server-73a3871f`;\n    const originalFetch = window.fetch.bind(window);\n    window.fetch = async (input, init)=>{\n        try {\n            const url = typeof input === \"string\" ? input : input.toString();\n            if (!url.startsWith(base)) {\n                return originalFetch(input, init);\n            }\n            const u = new URL(url);\n            const path = u.pathname.replace(\"/functions/v1\", \"\");\n            const method = (init?.method || \"GET\").toUpperCase();\n            const body = init?.body ? JSON.parse(init.body) : undefined;\n            // For local mode we ignore Authorization headers.\n            const store = (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.readStore)();\n            // Routes\n            // Cadets\n            if (path === \"/make-server-73a3871f/cadets\" && method === \"GET\") {\n                return jsonResponse({\n                    cadets: store.cadets\n                });\n            }\n            if (path === \"/make-server-73a3871f/cadets\" && method === \"POST\") {\n                const { name, joinDate, flight } = body || {};\n                if (!name || !flight) return badRequest(\"Name and flight are required\");\n                const cadet = {\n                    id: (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)(),\n                    name,\n                    flight,\n                    joinDate: joinDate || new Date().toISOString(),\n                    createdAt: new Date().toISOString()\n                };\n                store.cadets.push(cadet);\n                (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                return jsonResponse({\n                    cadet\n                });\n            }\n            const cadetMatch = path.match(/^\\/make-server-73a3871f\\/cadets\\/(.+)$/);\n            if (cadetMatch) {\n                const id = cadetMatch[1];\n                const idx = store.cadets.findIndex((c)=>c.id === id);\n                if (idx === -1) return notFound(\"Cadet not found\");\n                if (method === \"DELETE\") {\n                    store.cadets.splice(idx, 1);\n                    (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                    return jsonResponse({\n                        success: true\n                    });\n                }\n                if (method === \"PUT\") {\n                    const { name, flight, joinDate } = body || {};\n                    const cadet = store.cadets[idx];\n                    const updated = {\n                        ...cadet,\n                        name: name ?? cadet.name,\n                        flight: flight ?? cadet.flight,\n                        joinDate: joinDate ?? cadet.joinDate,\n                        updatedAt: new Date().toISOString()\n                    };\n                    store.cadets[idx] = updated;\n                    (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                    return jsonResponse({\n                        cadet: updated\n                    });\n                }\n            }\n            // Points\n            if (path === \"/make-server-73a3871f/points\" && method === \"GET\") {\n                const points = [\n                    ...store.points\n                ].sort((a, b)=>new Date(b.date).getTime() - new Date(a.date).getTime());\n                return jsonResponse({\n                    points\n                });\n            }\n            if (path === \"/make-server-73a3871f/points\" && method === \"POST\") {\n                const { cadetName, date, flight, reason, points, type } = body || {};\n                if (!cadetName || !flight || reason == null || points == null) return badRequest(\"Cadet name, flight, reason, and points are required\");\n                const point = {\n                    id: (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)(),\n                    cadetName,\n                    date: date || new Date().toISOString(),\n                    flight,\n                    reason,\n                    points,\n                    type: type || \"general\",\n                    createdAt: new Date().toISOString()\n                };\n                store.points.push(point);\n                (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                return jsonResponse({\n                    point\n                });\n            }\n            const pointMatch = path.match(/^\\/make-server-73a3871f\\/points\\/(.+)$/);\n            if (pointMatch) {\n                const id = pointMatch[1];\n                const idx = store.points.findIndex((p)=>p.id === id);\n                if (idx === -1) return notFound(\"Point not found\");\n                if (method === \"DELETE\") {\n                    store.points.splice(idx, 1);\n                    (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                    return jsonResponse({\n                        success: true\n                    });\n                }\n                if (method === \"PUT\") {\n                    const { points: newPoints, reason } = body || {};\n                    const p = store.points[idx];\n                    const updated = {\n                        ...p,\n                        points: newPoints ?? p.points,\n                        reason: reason ?? p.reason,\n                        updatedAt: new Date().toISOString()\n                    };\n                    store.points[idx] = updated;\n                    (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                    return jsonResponse({\n                        point: updated\n                    });\n                }\n            }\n            // Attendance\n            if (path === \"/make-server-73a3871f/attendance\" && method === \"GET\") {\n                const attendance = [\n                    ...store.attendance\n                ].sort((a, b)=>new Date(b.date).getTime() - new Date(a.date).getTime());\n                return jsonResponse({\n                    attendance\n                });\n            }\n            if (path === \"/make-server-73a3871f/attendance\" && method === \"POST\") {\n                const { cadetName, date, flight, status, bulkId } = body || {};\n                if (!cadetName || !flight || !status) return badRequest(\"Cadet name, flight, and status are required\");\n                const att = {\n                    id: (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)(),\n                    cadetName,\n                    date: date || new Date().toISOString(),\n                    flight,\n                    status,\n                    bulkId: bulkId || null,\n                    createdAt: new Date().toISOString()\n                };\n                store.attendance.push(att);\n                if (status === \"present\") {\n                    const pt = {\n                        id: (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)(),\n                        cadetName,\n                        date: att.date,\n                        flight,\n                        reason: \"Attendance - Present Correctly Dressed\",\n                        points: 1,\n                        type: \"attendance\",\n                        createdAt: new Date().toISOString()\n                    };\n                    store.points.push(pt);\n                }\n                (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                return jsonResponse({\n                    attendance: att\n                });\n            }\n            const attMatch = path.match(/^\\/make-server-73a3871f\\/attendance\\/(.+)$/);\n            if (attMatch && method === \"DELETE\") {\n                const id = attMatch[1];\n                const idx = store.attendance.findIndex((a)=>a.id === id);\n                if (idx === -1) return notFound(\"Attendance not found\");\n                store.attendance.splice(idx, 1);\n                (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                return jsonResponse({\n                    success: true\n                });\n            }\n            // Bulk attendance\n            if (path === \"/make-server-73a3871f/attendance/bulk\" && method === \"POST\") {\n                const { entries, date, flightFilter, bulkId } = body || {};\n                if (!entries || !Array.isArray(entries) || entries.length === 0) return badRequest(\"Entries are required\");\n                const id = bulkId || (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)();\n                let presentCount = 0;\n                for (const e of entries){\n                    const att = {\n                        id: (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)(),\n                        cadetName: e.cadetName,\n                        date: e.date || date || new Date().toISOString(),\n                        flight: e.flight,\n                        status: e.status,\n                        bulkId: id,\n                        createdAt: new Date().toISOString()\n                    };\n                    store.attendance.push(att);\n                    if (e.status === \"present\") {\n                        presentCount++;\n                        const pt = {\n                            id: (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.uuid)(),\n                            cadetName: e.cadetName,\n                            date: att.date,\n                            flight: e.flight,\n                            reason: \"Attendance - Present Correctly Dressed\",\n                            points: 1,\n                            type: \"attendance\",\n                            createdAt: new Date().toISOString()\n                        };\n                        store.points.push(pt);\n                    }\n                }\n                const bulk = {\n                    id,\n                    date: date || new Date().toISOString(),\n                    flightFilter: flightFilter || \"all\",\n                    totalRecords: entries.length,\n                    totalPresent: presentCount,\n                    createdAt: new Date().toISOString()\n                };\n                store.attendanceBulks.push(bulk);\n                (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                return jsonResponse({\n                    bulk\n                });\n            }\n            if (path === \"/make-server-73a3871f/attendance/bulk\" && method === \"GET\") {\n                const bulks = [\n                    ...store.attendanceBulks\n                ].sort((a, b)=>new Date(b.createdAt || \"\").getTime() - new Date(a.createdAt || \"\").getTime());\n                return jsonResponse({\n                    bulks\n                });\n            }\n            const bulkMatch = path.match(/^\\/make-server-73a3871f\\/attendance\\/bulk\\/(.+)$/);\n            if (bulkMatch && method === \"DELETE\") {\n                const id = bulkMatch[1];\n                // delete all attendance with this bulkId\n                store.attendance = store.attendance.filter((a)=>a.bulkId !== id);\n                // delete attendance points tied to those dates/names\n                // For simplicity, keep existing points; full parity would scan and remove matching attendance points.\n                store.attendanceBulks = store.attendanceBulks.filter((b)=>b.id !== id);\n                (0,_localStore__WEBPACK_IMPORTED_MODULE_1__.writeStore)(store);\n                return jsonResponse({\n                    success: true\n                });\n            }\n            // Leaderboards\n            if (path === \"/make-server-73a3871f/leaderboards\" && method === \"GET\") {\n                const points = store.points;\n                const cadetTotals = {};\n                points.forEach((p)=>{\n                    cadetTotals[p.cadetName] = (cadetTotals[p.cadetName] || 0) + (p.points || 0);\n                });\n                const flightTotals = {};\n                points.forEach((p)=>{\n                    flightTotals[p.flight] = (flightTotals[p.flight] || 0) + (p.points || 0);\n                });\n                const cadetLeaderboard = Object.entries(cadetTotals).map(([name, pts])=>({\n                        name,\n                        points: pts\n                    })).sort((a, b)=>b.points - a.points);\n                const flightLeaderboard = Object.entries(flightTotals).map(([flight, pts])=>({\n                        flight,\n                        points: pts\n                    })).sort((a, b)=>b.points - a.points);\n                const recentPoints = [\n                    ...points\n                ].filter((p)=>p.type !== \"attendance\").sort((a, b)=>new Date(b.date).getTime() - new Date(a.date).getTime()).slice(0, 20);\n                return jsonResponse({\n                    cadetLeaderboard,\n                    flightLeaderboard,\n                    recentPoints,\n                    winningCadet: cadetLeaderboard[0] || null,\n                    winningFlight: flightLeaderboard[0] || null\n                });\n            }\n            // Integrity check (basic)\n            if (path === \"/make-server-73a3871f/integrity-check\" && method === \"GET\") {\n                const cadets = store.cadets;\n                const points = store.points;\n                const attendance = store.attendance;\n                const cadetNames = new Set(cadets.map((c)=>c.name.toLowerCase()));\n                const invalidPoints = points.filter((p)=>!cadetNames.has(p.cadetName.toLowerCase()));\n                const invalidAttendance = attendance.filter((a)=>!cadetNames.has(a.cadetName.toLowerCase()));\n                const totalPointsGiven = points.reduce((s, p)=>s + (p.points || 0), 0);\n                const cadetTotals = {};\n                points.forEach((p)=>{\n                    cadetTotals[p.cadetName] = (cadetTotals[p.cadetName] || 0) + (p.points || 0);\n                });\n                const totalPointsCalculated = Object.values(cadetTotals).reduce((s, v)=>s + v, 0);\n                const nameCounts = {};\n                cadets.forEach((c)=>{\n                    const k = c.name.toLowerCase();\n                    nameCounts[k] = (nameCounts[k] || 0) + 1;\n                });\n                const duplicates = Object.entries(nameCounts).filter(([, n])=>n > 1);\n                const attendanceCadets = new Set(attendance.map((a)=>`${a.cadetName}:${a.date}`));\n                const attendancePoints = points.filter((p)=>p.type === \"attendance\");\n                const orphanedPoints = attendancePoints.filter((p)=>!attendanceCadets.has(`${p.cadetName}:${p.date}`));\n                const cadetsWithoutFlight = cadets.filter((c)=>!c.flight || c.flight.trim() === \"\");\n                const checks = [\n                    {\n                        name: \"Points Reference Valid Cadets\",\n                        status: invalidPoints.length === 0 ? \"pass\" : \"fail\",\n                        message: invalidPoints.length === 0 ? `All ${points.length} point records reference valid cadets` : `${invalidPoints.length} point record(s) reference non-existent cadets`\n                    },\n                    {\n                        name: \"Attendance References Valid Cadets\",\n                        status: invalidAttendance.length === 0 ? \"pass\" : \"fail\",\n                        message: invalidAttendance.length === 0 ? `All ${attendance.length} attendance records reference valid cadets` : `${invalidAttendance.length} attendance record(s) reference non-existent cadets`\n                    },\n                    {\n                        name: \"Points Total Consistency\",\n                        status: totalPointsGiven === totalPointsCalculated ? \"pass\" : \"fail\",\n                        message: totalPointsGiven === totalPointsCalculated ? `Points totals match: ${totalPointsGiven} points` : `Points mismatch detected`\n                    },\n                    {\n                        name: \"Unique Cadet Names\",\n                        status: duplicates.length === 0 ? \"pass\" : \"warning\",\n                        message: duplicates.length === 0 ? `All ${cadets.length} cadet names are unique` : `${duplicates.length} duplicate cadet name(s) found`\n                    },\n                    {\n                        name: \"Attendance Points Have Records\",\n                        status: orphanedPoints.length === 0 ? \"pass\" : \"warning\",\n                        message: orphanedPoints.length === 0 ? `All ${attendancePoints.length} attendance points have corresponding records` : `${orphanedPoints.length} attendance point(s) without records`\n                    },\n                    {\n                        name: \"All Cadets Assigned to Flight\",\n                        status: cadetsWithoutFlight.length === 0 ? \"pass\" : \"fail\",\n                        message: cadetsWithoutFlight.length === 0 ? `All cadets are assigned to a flight` : `${cadetsWithoutFlight.length} cadet(s) not assigned to a flight`\n                    }\n                ];\n                const summary = {\n                    totalChecks: checks.length,\n                    passed: checks.filter((c)=>c.status === \"pass\").length,\n                    warnings: checks.filter((c)=>c.status === \"warning\").length,\n                    failed: checks.filter((c)=>c.status === \"fail\").length\n                };\n                return jsonResponse({\n                    checks,\n                    summary\n                });\n            }\n            // Reports\n            if (path === \"/make-server-73a3871f/attendance/reports\" && method === \"GET\") {\n                const attendance = store.attendance;\n                const cadetSummary = {};\n                attendance.forEach((rec)=>{\n                    const k = rec.cadetName;\n                    cadetSummary[k] = cadetSummary[k] || {\n                        cadetName: rec.cadetName,\n                        flight: rec.flight,\n                        totalPresent: 0,\n                        totalAuthorisedAbsence: 0,\n                        totalAbsent: 0,\n                        totalRecords: 0\n                    };\n                    cadetSummary[k].totalRecords++;\n                    if (rec.status === \"present\") cadetSummary[k].totalPresent++;\n                    else if (rec.status === \"authorised_absence\") cadetSummary[k].totalAuthorisedAbsence++;\n                    else if (rec.status === \"absent\") cadetSummary[k].totalAbsent++;\n                });\n                const summary = Object.values(cadetSummary).map((c)=>({\n                        ...c,\n                        attendanceRate: c.totalRecords > 0 ? Math.round(c.totalPresent / c.totalRecords * 100) : 0\n                    }));\n                const stats = {\n                    totalPresent: summary.reduce((s, c)=>s + c.totalPresent, 0),\n                    totalAuthorisedAbsence: summary.reduce((s, c)=>s + c.totalAuthorisedAbsence, 0),\n                    totalAbsent: summary.reduce((s, c)=>s + c.totalAbsent, 0),\n                    averageAttendanceRate: summary.length > 0 ? Math.round(summary.reduce((s, c)=>s + c.attendanceRate, 0) / summary.length) : 0\n                };\n                return jsonResponse({\n                    summary,\n                    stats\n                });\n            }\n            // Default: not found for unimplemented routes\n            return notFound(\"Local mode route not implemented: \" + path);\n        } catch (e) {\n            console.error(\"Local mode handler error\", e);\n            return jsonResponse({\n                error: String(e?.message || e)\n            }, 500);\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxDQUFDWCxRQUFRaEIsTUFBTSxDQUFDLENBQUNDLEdBQVd6RCxJQUFXeUQsSUFBSXpELEVBQUVpRixjQUFjLEVBQUUsS0FBS1QsUUFBUTdDLE1BQU0sSUFBSTtnQkFDNUk7Z0JBQ0EsT0FBTzNFLGFBQWE7b0JBQUV3SDtvQkFBU1k7Z0JBQU07WUFDdkM7WUFFQSw4Q0FBOEM7WUFDOUMsT0FBTzVILFNBQVMsdUNBQXVDaUI7UUFDekQsRUFBRSxPQUFPb0QsR0FBUTtZQUNmeUQsUUFBUTVILEtBQUssQ0FBQyw0QkFBNEJtRTtZQUMxQyxPQUFPN0UsYUFBYTtnQkFBRVUsT0FBTzZILE9BQU8xRCxHQUFHMEMsV0FBVzFDO1lBQUcsR0FBRztRQUMxRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZmlnbWEvbXktbWFrZS1maWxlLy4vc3JjL3V0aWxzL2xvY2FsQXBpU2hpbS50cz8yYTFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByb2plY3RJZCB9IGZyb20gJy4uLy4uL3V0aWxzL3N1cGFiYXNlL2luZm8nO1xyXG5pbXBvcnQgeyByZWFkU3RvcmUsIHdyaXRlU3RvcmUsIHV1aWQsIHR5cGUgQ2FkZXQsIHR5cGUgUG9pbnQsIHR5cGUgQXR0ZW5kYW5jZSwgdHlwZSBBdHRlbmRhbmNlQnVsayB9IGZyb20gJy4vbG9jYWxTdG9yZSc7XHJcblxyXG5mdW5jdGlvbiBqc29uUmVzcG9uc2Uob2JqOiBhbnksIGluaXQ6IG51bWJlciA9IDIwMCkge1xyXG4gIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkob2JqKSwgeyBzdGF0dXM6IGluaXQsIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBub3RGb3VuZChtc2cgPSAnTm90IGZvdW5kJykgeyByZXR1cm4ganNvblJlc3BvbnNlKHsgZXJyb3I6IG1zZyB9LCA0MDQpOyB9XHJcbmZ1bmN0aW9uIGJhZFJlcXVlc3QobXNnID0gJ0JhZCByZXF1ZXN0JykgeyByZXR1cm4ganNvblJlc3BvbnNlKHsgZXJyb3I6IG1zZyB9LCA0MDApOyB9XHJcbmZ1bmN0aW9uIHVuYXV0aG9yaXplZChtc2cgPSAnVW5hdXRob3JpemVkJykgeyByZXR1cm4ganNvblJlc3BvbnNlKHsgZXJyb3I6IG1zZyB9LCA0MDEpOyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlTG9jYWxNb2RlKCkge1xyXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhKHdpbmRvdyBhcyBhbnkpLmZldGNoKSByZXR1cm47XHJcbiAgY29uc3QgYmFzZSA9IGBodHRwczovLyR7cHJvamVjdElkfS5zdXBhYmFzZS5jby9mdW5jdGlvbnMvdjEvbWFrZS1zZXJ2ZXItNzNhMzg3MWZgO1xyXG4gIGNvbnN0IG9yaWdpbmFsRmV0Y2ggPSB3aW5kb3cuZmV0Y2guYmluZCh3aW5kb3cpO1xyXG5cclxuICB3aW5kb3cuZmV0Y2ggPSBhc3luYyAoaW5wdXQ6IFJlcXVlc3RJbmZvIHwgVVJMLCBpbml0PzogUmVxdWVzdEluaXQpOiBQcm9taXNlPFJlc3BvbnNlPiA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB1cmwgPSB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gaW5wdXQgOiAoaW5wdXQgYXMgVVJMKS50b1N0cmluZygpO1xyXG4gICAgICBpZiAoIXVybC5zdGFydHNXaXRoKGJhc2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsRmV0Y2goaW5wdXQgYXMgYW55LCBpbml0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgdSA9IG5ldyBVUkwodXJsKTtcclxuICAgICAgY29uc3QgcGF0aCA9IHUucGF0aG5hbWUucmVwbGFjZSgnL2Z1bmN0aW9ucy92MScsICcnKTtcclxuICAgICAgY29uc3QgbWV0aG9kID0gKGluaXQ/Lm1ldGhvZCB8fCAnR0VUJykudG9VcHBlckNhc2UoKTtcclxuICAgICAgY29uc3QgYm9keSA9IGluaXQ/LmJvZHkgPyBKU09OLnBhcnNlKGluaXQuYm9keSBhcyBzdHJpbmcpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgLy8gRm9yIGxvY2FsIG1vZGUgd2UgaWdub3JlIEF1dGhvcml6YXRpb24gaGVhZGVycy5cclxuICAgICAgY29uc3Qgc3RvcmUgPSByZWFkU3RvcmUoKTtcclxuXHJcbiAgICAgIC8vIFJvdXRlc1xyXG4gICAgICAvLyBDYWRldHNcclxuICAgICAgaWYgKHBhdGggPT09ICcvbWFrZS1zZXJ2ZXItNzNhMzg3MWYvY2FkZXRzJyAmJiBtZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZSh7IGNhZGV0czogc3RvcmUuY2FkZXRzIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYXRoID09PSAnL21ha2Utc2VydmVyLTczYTM4NzFmL2NhZGV0cycgJiYgbWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgICAgICBjb25zdCB7IG5hbWUsIGpvaW5EYXRlLCBmbGlnaHQgfSA9IGJvZHkgfHwge307XHJcbiAgICAgICAgaWYgKCFuYW1lIHx8ICFmbGlnaHQpIHJldHVybiBiYWRSZXF1ZXN0KCdOYW1lIGFuZCBmbGlnaHQgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgY29uc3QgY2FkZXQ6IENhZGV0ID0geyBpZDogdXVpZCgpLCBuYW1lLCBmbGlnaHQsIGpvaW5EYXRlOiBqb2luRGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07XHJcbiAgICAgICAgc3RvcmUuY2FkZXRzLnB1c2goY2FkZXQpO1xyXG4gICAgICAgIHdyaXRlU3RvcmUoc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBjYWRldCB9KTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBjYWRldE1hdGNoID0gcGF0aC5tYXRjaCgvXlxcL21ha2Utc2VydmVyLTczYTM4NzFmXFwvY2FkZXRzXFwvKC4rKSQvKTtcclxuICAgICAgaWYgKGNhZGV0TWF0Y2gpIHtcclxuICAgICAgICBjb25zdCBpZCA9IGNhZGV0TWF0Y2hbMV07XHJcbiAgICAgICAgY29uc3QgaWR4ID0gc3RvcmUuY2FkZXRzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IGlkKTtcclxuICAgICAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIG5vdEZvdW5kKCdDYWRldCBub3QgZm91bmQnKTtcclxuICAgICAgICBpZiAobWV0aG9kID09PSAnREVMRVRFJykge1xyXG4gICAgICAgICAgc3RvcmUuY2FkZXRzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgd3JpdGVTdG9yZShzdG9yZSk7XHJcbiAgICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ1BVVCcpIHtcclxuICAgICAgICAgIGNvbnN0IHsgbmFtZSwgZmxpZ2h0LCBqb2luRGF0ZSB9ID0gYm9keSB8fCB7fTtcclxuICAgICAgICAgIGNvbnN0IGNhZGV0ID0gc3RvcmUuY2FkZXRzW2lkeF07XHJcbiAgICAgICAgICBjb25zdCB1cGRhdGVkOiBDYWRldCA9IHsgLi4uY2FkZXQsIG5hbWU6IG5hbWUgPz8gY2FkZXQubmFtZSwgZmxpZ2h0OiBmbGlnaHQgPz8gY2FkZXQuZmxpZ2h0LCBqb2luRGF0ZTogam9pbkRhdGUgPz8gY2FkZXQuam9pbkRhdGUsIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07XHJcbiAgICAgICAgICBzdG9yZS5jYWRldHNbaWR4XSA9IHVwZGF0ZWQ7XHJcbiAgICAgICAgICB3cml0ZVN0b3JlKHN0b3JlKTtcclxuICAgICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBjYWRldDogdXBkYXRlZCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFBvaW50c1xyXG4gICAgICBpZiAocGF0aCA9PT0gJy9tYWtlLXNlcnZlci03M2EzODcxZi9wb2ludHMnICYmIG1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBbLi4uc3RvcmUucG9pbnRzXS5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuZGF0ZSkuZ2V0VGltZSgpKTtcclxuICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlKHsgcG9pbnRzIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYXRoID09PSAnL21ha2Utc2VydmVyLTczYTM4NzFmL3BvaW50cycgJiYgbWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgICAgICBjb25zdCB7IGNhZGV0TmFtZSwgZGF0ZSwgZmxpZ2h0LCByZWFzb24sIHBvaW50cywgdHlwZSB9ID0gYm9keSB8fCB7fTtcclxuICAgICAgICBpZiAoIWNhZGV0TmFtZSB8fCAhZmxpZ2h0IHx8IHJlYXNvbiA9PSBudWxsIHx8IHBvaW50cyA9PSBudWxsKSByZXR1cm4gYmFkUmVxdWVzdCgnQ2FkZXQgbmFtZSwgZmxpZ2h0LCByZWFzb24sIGFuZCBwb2ludHMgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgY29uc3QgcG9pbnQ6IFBvaW50ID0geyBpZDogdXVpZCgpLCBjYWRldE5hbWUsIGRhdGU6IGRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBmbGlnaHQsIHJlYXNvbiwgcG9pbnRzLCB0eXBlOiB0eXBlIHx8ICdnZW5lcmFsJywgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfTtcclxuICAgICAgICBzdG9yZS5wb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgd3JpdGVTdG9yZShzdG9yZSk7XHJcbiAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZSh7IHBvaW50IH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBvaW50TWF0Y2ggPSBwYXRoLm1hdGNoKC9eXFwvbWFrZS1zZXJ2ZXItNzNhMzg3MWZcXC9wb2ludHNcXC8oLispJC8pO1xyXG4gICAgICBpZiAocG9pbnRNYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IGlkID0gcG9pbnRNYXRjaFsxXTtcclxuICAgICAgICBjb25zdCBpZHggPSBzdG9yZS5wb2ludHMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gaWQpO1xyXG4gICAgICAgIGlmIChpZHggPT09IC0xKSByZXR1cm4gbm90Rm91bmQoJ1BvaW50IG5vdCBmb3VuZCcpO1xyXG4gICAgICAgIGlmIChtZXRob2QgPT09ICdERUxFVEUnKSB7XHJcbiAgICAgICAgICBzdG9yZS5wb2ludHMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICB3cml0ZVN0b3JlKHN0b3JlKTtcclxuICAgICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBzdWNjZXNzOiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWV0aG9kID09PSAnUFVUJykge1xyXG4gICAgICAgICAgY29uc3QgeyBwb2ludHM6IG5ld1BvaW50cywgcmVhc29uIH0gPSBib2R5IHx8IHt9O1xyXG4gICAgICAgICAgY29uc3QgcCA9IHN0b3JlLnBvaW50c1tpZHhdO1xyXG4gICAgICAgICAgY29uc3QgdXBkYXRlZDogUG9pbnQgPSB7IC4uLnAsIHBvaW50czogbmV3UG9pbnRzID8/IHAucG9pbnRzLCByZWFzb246IHJlYXNvbiA/PyBwLnJlYXNvbiwgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfTtcclxuICAgICAgICAgIHN0b3JlLnBvaW50c1tpZHhdID0gdXBkYXRlZDtcclxuICAgICAgICAgIHdyaXRlU3RvcmUoc3RvcmUpO1xyXG4gICAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZSh7IHBvaW50OiB1cGRhdGVkIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQXR0ZW5kYW5jZVxyXG4gICAgICBpZiAocGF0aCA9PT0gJy9tYWtlLXNlcnZlci03M2EzODcxZi9hdHRlbmRhbmNlJyAmJiBtZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IFsuLi5zdG9yZS5hdHRlbmRhbmNlXS5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuZGF0ZSkuZ2V0VGltZSgpKTtcclxuICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlKHsgYXR0ZW5kYW5jZSB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocGF0aCA9PT0gJy9tYWtlLXNlcnZlci03M2EzODcxZi9hdHRlbmRhbmNlJyAmJiBtZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICAgIGNvbnN0IHsgY2FkZXROYW1lLCBkYXRlLCBmbGlnaHQsIHN0YXR1cywgYnVsa0lkIH0gPSBib2R5IHx8IHt9O1xyXG4gICAgICAgIGlmICghY2FkZXROYW1lIHx8ICFmbGlnaHQgfHwgIXN0YXR1cykgcmV0dXJuIGJhZFJlcXVlc3QoJ0NhZGV0IG5hbWUsIGZsaWdodCwgYW5kIHN0YXR1cyBhcmUgcmVxdWlyZWQnKTtcclxuICAgICAgICBjb25zdCBhdHQ6IEF0dGVuZGFuY2UgPSB7IGlkOiB1dWlkKCksIGNhZGV0TmFtZSwgZGF0ZTogZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGZsaWdodCwgc3RhdHVzLCBidWxrSWQ6IGJ1bGtJZCB8fCBudWxsLCBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9O1xyXG4gICAgICAgIHN0b3JlLmF0dGVuZGFuY2UucHVzaChhdHQpO1xyXG4gICAgICAgIGlmIChzdGF0dXMgPT09ICdwcmVzZW50Jykge1xyXG4gICAgICAgICAgY29uc3QgcHQ6IFBvaW50ID0geyBpZDogdXVpZCgpLCBjYWRldE5hbWUsIGRhdGU6IGF0dC5kYXRlLCBmbGlnaHQsIHJlYXNvbjogJ0F0dGVuZGFuY2UgLSBQcmVzZW50IENvcnJlY3RseSBEcmVzc2VkJywgcG9pbnRzOiAxLCB0eXBlOiAnYXR0ZW5kYW5jZScsIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07XHJcbiAgICAgICAgICBzdG9yZS5wb2ludHMucHVzaChwdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdyaXRlU3RvcmUoc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBhdHRlbmRhbmNlOiBhdHQgfSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYXR0TWF0Y2ggPSBwYXRoLm1hdGNoKC9eXFwvbWFrZS1zZXJ2ZXItNzNhMzg3MWZcXC9hdHRlbmRhbmNlXFwvKC4rKSQvKTtcclxuICAgICAgaWYgKGF0dE1hdGNoICYmIG1ldGhvZCA9PT0gJ0RFTEVURScpIHtcclxuICAgICAgICBjb25zdCBpZCA9IGF0dE1hdGNoWzFdO1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IHN0b3JlLmF0dGVuZGFuY2UuZmluZEluZGV4KGEgPT4gYS5pZCA9PT0gaWQpO1xyXG4gICAgICAgIGlmIChpZHggPT09IC0xKSByZXR1cm4gbm90Rm91bmQoJ0F0dGVuZGFuY2Ugbm90IGZvdW5kJyk7XHJcbiAgICAgICAgc3RvcmUuYXR0ZW5kYW5jZS5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICB3cml0ZVN0b3JlKHN0b3JlKTtcclxuICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlKHsgc3VjY2VzczogdHJ1ZSB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQnVsayBhdHRlbmRhbmNlXHJcbiAgICAgIGlmIChwYXRoID09PSAnL21ha2Utc2VydmVyLTczYTM4NzFmL2F0dGVuZGFuY2UvYnVsaycgJiYgbWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgICAgICBjb25zdCB7IGVudHJpZXMsIGRhdGUsIGZsaWdodEZpbHRlciwgYnVsa0lkIH0gPSBib2R5IHx8IHt9O1xyXG4gICAgICAgIGlmICghZW50cmllcyB8fCAhQXJyYXkuaXNBcnJheShlbnRyaWVzKSB8fCBlbnRyaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGJhZFJlcXVlc3QoJ0VudHJpZXMgYXJlIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBidWxrSWQgfHwgdXVpZCgpO1xyXG4gICAgICAgIGxldCBwcmVzZW50Q291bnQgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XHJcbiAgICAgICAgICBjb25zdCBhdHQ6IEF0dGVuZGFuY2UgPSB7IGlkOiB1dWlkKCksIGNhZGV0TmFtZTogZS5jYWRldE5hbWUsIGRhdGU6IGUuZGF0ZSB8fCBkYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgZmxpZ2h0OiBlLmZsaWdodCwgc3RhdHVzOiBlLnN0YXR1cywgYnVsa0lkOiBpZCwgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfTtcclxuICAgICAgICAgIHN0b3JlLmF0dGVuZGFuY2UucHVzaChhdHQpO1xyXG4gICAgICAgICAgaWYgKGUuc3RhdHVzID09PSAncHJlc2VudCcpIHtcclxuICAgICAgICAgICAgcHJlc2VudENvdW50Kys7XHJcbiAgICAgICAgICAgIGNvbnN0IHB0OiBQb2ludCA9IHsgaWQ6IHV1aWQoKSwgY2FkZXROYW1lOiBlLmNhZGV0TmFtZSwgZGF0ZTogYXR0LmRhdGUsIGZsaWdodDogZS5mbGlnaHQsIHJlYXNvbjogJ0F0dGVuZGFuY2UgLSBQcmVzZW50IENvcnJlY3RseSBEcmVzc2VkJywgcG9pbnRzOiAxLCB0eXBlOiAnYXR0ZW5kYW5jZScsIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07XHJcbiAgICAgICAgICAgIHN0b3JlLnBvaW50cy5wdXNoKHB0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYnVsazogQXR0ZW5kYW5jZUJ1bGsgPSB7IGlkLCBkYXRlOiBkYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgZmxpZ2h0RmlsdGVyOiBmbGlnaHRGaWx0ZXIgfHwgJ2FsbCcsIHRvdGFsUmVjb3JkczogZW50cmllcy5sZW5ndGgsIHRvdGFsUHJlc2VudDogcHJlc2VudENvdW50LCBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9O1xyXG4gICAgICAgIHN0b3JlLmF0dGVuZGFuY2VCdWxrcy5wdXNoKGJ1bGspO1xyXG4gICAgICAgIHdyaXRlU3RvcmUoc3RvcmUpO1xyXG4gICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBidWxrIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYXRoID09PSAnL21ha2Utc2VydmVyLTczYTM4NzFmL2F0dGVuZGFuY2UvYnVsaycgJiYgbWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgICAgIGNvbnN0IGJ1bGtzID0gWy4uLnN0b3JlLmF0dGVuZGFuY2VCdWxrc10uc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkQXQgfHwgJycpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0IHx8ICcnKS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIHJldHVybiBqc29uUmVzcG9uc2UoeyBidWxrcyB9KTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBidWxrTWF0Y2ggPSBwYXRoLm1hdGNoKC9eXFwvbWFrZS1zZXJ2ZXItNzNhMzg3MWZcXC9hdHRlbmRhbmNlXFwvYnVsa1xcLyguKykkLyk7XHJcbiAgICAgIGlmIChidWxrTWF0Y2ggJiYgbWV0aG9kID09PSAnREVMRVRFJykge1xyXG4gICAgICAgIGNvbnN0IGlkID0gYnVsa01hdGNoWzFdO1xyXG4gICAgICAgIC8vIGRlbGV0ZSBhbGwgYXR0ZW5kYW5jZSB3aXRoIHRoaXMgYnVsa0lkXHJcbiAgICAgICAgc3RvcmUuYXR0ZW5kYW5jZSA9IHN0b3JlLmF0dGVuZGFuY2UuZmlsdGVyKGEgPT4gYS5idWxrSWQgIT09IGlkKTtcclxuICAgICAgICAvLyBkZWxldGUgYXR0ZW5kYW5jZSBwb2ludHMgdGllZCB0byB0aG9zZSBkYXRlcy9uYW1lc1xyXG4gICAgICAgIC8vIEZvciBzaW1wbGljaXR5LCBrZWVwIGV4aXN0aW5nIHBvaW50czsgZnVsbCBwYXJpdHkgd291bGQgc2NhbiBhbmQgcmVtb3ZlIG1hdGNoaW5nIGF0dGVuZGFuY2UgcG9pbnRzLlxyXG4gICAgICAgIHN0b3JlLmF0dGVuZGFuY2VCdWxrcyA9IHN0b3JlLmF0dGVuZGFuY2VCdWxrcy5maWx0ZXIoYiA9PiBiLmlkICE9PSBpZCk7XHJcbiAgICAgICAgd3JpdGVTdG9yZShzdG9yZSk7XHJcbiAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZSh7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIExlYWRlcmJvYXJkc1xyXG4gICAgICBpZiAocGF0aCA9PT0gJy9tYWtlLXNlcnZlci03M2EzODcxZi9sZWFkZXJib2FyZHMnICYmIG1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBzdG9yZS5wb2ludHM7XHJcbiAgICAgICAgY29uc3QgY2FkZXRUb3RhbHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICAgICAgICBwb2ludHMuZm9yRWFjaChwID0+IHsgY2FkZXRUb3RhbHNbcC5jYWRldE5hbWVdID0gKGNhZGV0VG90YWxzW3AuY2FkZXROYW1lXSB8fCAwKSArIChwLnBvaW50cyB8fCAwKTsgfSk7XHJcbiAgICAgICAgY29uc3QgZmxpZ2h0VG90YWxzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgICAgICAgcG9pbnRzLmZvckVhY2gocCA9PiB7IGZsaWdodFRvdGFsc1twLmZsaWdodF0gPSAoZmxpZ2h0VG90YWxzW3AuZmxpZ2h0XSB8fCAwKSArIChwLnBvaW50cyB8fCAwKTsgfSk7XHJcbiAgICAgICAgY29uc3QgY2FkZXRMZWFkZXJib2FyZCA9IE9iamVjdC5lbnRyaWVzKGNhZGV0VG90YWxzKS5tYXAoKFtuYW1lLCBwdHNdKSA9PiAoeyBuYW1lLCBwb2ludHM6IHB0cyB9KSkuc29ydCgoYSwgYikgPT4gYi5wb2ludHMgLSBhLnBvaW50cyk7XHJcbiAgICAgICAgY29uc3QgZmxpZ2h0TGVhZGVyYm9hcmQgPSBPYmplY3QuZW50cmllcyhmbGlnaHRUb3RhbHMpLm1hcCgoW2ZsaWdodCwgcHRzXSkgPT4gKHsgZmxpZ2h0LCBwb2ludHM6IHB0cyB9KSkuc29ydCgoYSwgYikgPT4gYi5wb2ludHMgLSBhLnBvaW50cyk7XHJcbiAgICAgICAgY29uc3QgcmVjZW50UG9pbnRzID0gWy4uLnBvaW50c10uZmlsdGVyKHAgPT4gcC50eXBlICE9PSAnYXR0ZW5kYW5jZScpLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIuZGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5kYXRlKS5nZXRUaW1lKCkpLnNsaWNlKDAsIDIwKTtcclxuICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlKHsgY2FkZXRMZWFkZXJib2FyZCwgZmxpZ2h0TGVhZGVyYm9hcmQsIHJlY2VudFBvaW50cywgd2lubmluZ0NhZGV0OiBjYWRldExlYWRlcmJvYXJkWzBdIHx8IG51bGwsIHdpbm5pbmdGbGlnaHQ6IGZsaWdodExlYWRlcmJvYXJkWzBdIHx8IG51bGwgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEludGVncml0eSBjaGVjayAoYmFzaWMpXHJcbiAgICAgIGlmIChwYXRoID09PSAnL21ha2Utc2VydmVyLTczYTM4NzFmL2ludGVncml0eS1jaGVjaycgJiYgbWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgICAgIGNvbnN0IGNhZGV0cyA9IHN0b3JlLmNhZGV0cztcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBzdG9yZS5wb2ludHM7XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZSA9IHN0b3JlLmF0dGVuZGFuY2U7XHJcbiAgICAgICAgY29uc3QgY2FkZXROYW1lcyA9IG5ldyBTZXQoY2FkZXRzLm1hcChjID0+IGMubmFtZS50b0xvd2VyQ2FzZSgpKSk7XHJcbiAgICAgICAgY29uc3QgaW52YWxpZFBvaW50cyA9IHBvaW50cy5maWx0ZXIocCA9PiAhY2FkZXROYW1lcy5oYXMocC5jYWRldE5hbWUudG9Mb3dlckNhc2UoKSkpO1xyXG4gICAgICAgIGNvbnN0IGludmFsaWRBdHRlbmRhbmNlID0gYXR0ZW5kYW5jZS5maWx0ZXIoYSA9PiAhY2FkZXROYW1lcy5oYXMoYS5jYWRldE5hbWUudG9Mb3dlckNhc2UoKSkpO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsUG9pbnRzR2l2ZW4gPSBwb2ludHMucmVkdWNlKChzLCBwKSA9PiBzICsgKHAucG9pbnRzIHx8IDApLCAwKTtcclxuICAgICAgICBjb25zdCBjYWRldFRvdGFsczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xyXG4gICAgICAgIHBvaW50cy5mb3JFYWNoKHAgPT4geyBjYWRldFRvdGFsc1twLmNhZGV0TmFtZV0gPSAoY2FkZXRUb3RhbHNbcC5jYWRldE5hbWVdIHx8IDApICsgKHAucG9pbnRzIHx8IDApOyB9KTtcclxuICAgICAgICBjb25zdCB0b3RhbFBvaW50c0NhbGN1bGF0ZWQgPSBPYmplY3QudmFsdWVzKGNhZGV0VG90YWxzKS5yZWR1Y2UoKHMsIHYpID0+IHMgKyB2LCAwKTtcclxuICAgICAgICBjb25zdCBuYW1lQ291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XHJcbiAgICAgICAgY2FkZXRzLmZvckVhY2goYyA9PiB7IGNvbnN0IGsgPSBjLm5hbWUudG9Mb3dlckNhc2UoKTsgbmFtZUNvdW50c1trXSA9IChuYW1lQ291bnRzW2tdIHx8IDApICsgMTsgfSk7XHJcbiAgICAgICAgY29uc3QgZHVwbGljYXRlcyA9IE9iamVjdC5lbnRyaWVzKG5hbWVDb3VudHMpLmZpbHRlcigoWywgbl0pID0+IG4gPiAxKTtcclxuICAgICAgICBjb25zdCBhdHRlbmRhbmNlQ2FkZXRzID0gbmV3IFNldChhdHRlbmRhbmNlLm1hcChhID0+IGAke2EuY2FkZXROYW1lfToke2EuZGF0ZX1gKSk7XHJcbiAgICAgICAgY29uc3QgYXR0ZW5kYW5jZVBvaW50cyA9IHBvaW50cy5maWx0ZXIocCA9PiBwLnR5cGUgPT09ICdhdHRlbmRhbmNlJyk7XHJcbiAgICAgICAgY29uc3Qgb3JwaGFuZWRQb2ludHMgPSBhdHRlbmRhbmNlUG9pbnRzLmZpbHRlcihwID0+ICFhdHRlbmRhbmNlQ2FkZXRzLmhhcyhgJHtwLmNhZGV0TmFtZX06JHtwLmRhdGV9YCkpO1xyXG4gICAgICAgIGNvbnN0IGNhZGV0c1dpdGhvdXRGbGlnaHQgPSBjYWRldHMuZmlsdGVyKGMgPT4gIWMuZmxpZ2h0IHx8IGMuZmxpZ2h0LnRyaW0oKSA9PT0gJycpO1xyXG4gICAgICAgIGNvbnN0IGNoZWNrcyA9IFtcclxuICAgICAgICAgIHsgbmFtZTogJ1BvaW50cyBSZWZlcmVuY2UgVmFsaWQgQ2FkZXRzJywgc3RhdHVzOiBpbnZhbGlkUG9pbnRzLmxlbmd0aCA9PT0gMCA/ICdwYXNzJyA6ICdmYWlsJywgbWVzc2FnZTogaW52YWxpZFBvaW50cy5sZW5ndGggPT09IDAgPyBgQWxsICR7cG9pbnRzLmxlbmd0aH0gcG9pbnQgcmVjb3JkcyByZWZlcmVuY2UgdmFsaWQgY2FkZXRzYCA6IGAke2ludmFsaWRQb2ludHMubGVuZ3RofSBwb2ludCByZWNvcmQocykgcmVmZXJlbmNlIG5vbi1leGlzdGVudCBjYWRldHNgIH0sXHJcbiAgICAgICAgICB7IG5hbWU6ICdBdHRlbmRhbmNlIFJlZmVyZW5jZXMgVmFsaWQgQ2FkZXRzJywgc3RhdHVzOiBpbnZhbGlkQXR0ZW5kYW5jZS5sZW5ndGggPT09IDAgPyAncGFzcycgOiAnZmFpbCcsIG1lc3NhZ2U6IGludmFsaWRBdHRlbmRhbmNlLmxlbmd0aCA9PT0gMCA/IGBBbGwgJHthdHRlbmRhbmNlLmxlbmd0aH0gYXR0ZW5kYW5jZSByZWNvcmRzIHJlZmVyZW5jZSB2YWxpZCBjYWRldHNgIDogYCR7aW52YWxpZEF0dGVuZGFuY2UubGVuZ3RofSBhdHRlbmRhbmNlIHJlY29yZChzKSByZWZlcmVuY2Ugbm9uLWV4aXN0ZW50IGNhZGV0c2AgfSxcclxuICAgICAgICAgIHsgbmFtZTogJ1BvaW50cyBUb3RhbCBDb25zaXN0ZW5jeScsIHN0YXR1czogdG90YWxQb2ludHNHaXZlbiA9PT0gdG90YWxQb2ludHNDYWxjdWxhdGVkID8gJ3Bhc3MnIDogJ2ZhaWwnLCBtZXNzYWdlOiB0b3RhbFBvaW50c0dpdmVuID09PSB0b3RhbFBvaW50c0NhbGN1bGF0ZWQgPyBgUG9pbnRzIHRvdGFscyBtYXRjaDogJHt0b3RhbFBvaW50c0dpdmVufSBwb2ludHNgIDogYFBvaW50cyBtaXNtYXRjaCBkZXRlY3RlZGAgfSxcclxuICAgICAgICAgIHsgbmFtZTogJ1VuaXF1ZSBDYWRldCBOYW1lcycsIHN0YXR1czogZHVwbGljYXRlcy5sZW5ndGggPT09IDAgPyAncGFzcycgOiAnd2FybmluZycsIG1lc3NhZ2U6IGR1cGxpY2F0ZXMubGVuZ3RoID09PSAwID8gYEFsbCAke2NhZGV0cy5sZW5ndGh9IGNhZGV0IG5hbWVzIGFyZSB1bmlxdWVgIDogYCR7ZHVwbGljYXRlcy5sZW5ndGh9IGR1cGxpY2F0ZSBjYWRldCBuYW1lKHMpIGZvdW5kYCB9LFxyXG4gICAgICAgICAgeyBuYW1lOiAnQXR0ZW5kYW5jZSBQb2ludHMgSGF2ZSBSZWNvcmRzJywgc3RhdHVzOiBvcnBoYW5lZFBvaW50cy5sZW5ndGggPT09IDAgPyAncGFzcycgOiAnd2FybmluZycsIG1lc3NhZ2U6IG9ycGhhbmVkUG9pbnRzLmxlbmd0aCA9PT0gMCA/IGBBbGwgJHthdHRlbmRhbmNlUG9pbnRzLmxlbmd0aH0gYXR0ZW5kYW5jZSBwb2ludHMgaGF2ZSBjb3JyZXNwb25kaW5nIHJlY29yZHNgIDogYCR7b3JwaGFuZWRQb2ludHMubGVuZ3RofSBhdHRlbmRhbmNlIHBvaW50KHMpIHdpdGhvdXQgcmVjb3Jkc2AgfSxcclxuICAgICAgICAgIHsgbmFtZTogJ0FsbCBDYWRldHMgQXNzaWduZWQgdG8gRmxpZ2h0Jywgc3RhdHVzOiBjYWRldHNXaXRob3V0RmxpZ2h0Lmxlbmd0aCA9PT0gMCA/ICdwYXNzJyA6ICdmYWlsJywgbWVzc2FnZTogY2FkZXRzV2l0aG91dEZsaWdodC5sZW5ndGggPT09IDAgPyBgQWxsIGNhZGV0cyBhcmUgYXNzaWduZWQgdG8gYSBmbGlnaHRgIDogYCR7Y2FkZXRzV2l0aG91dEZsaWdodC5sZW5ndGh9IGNhZGV0KHMpIG5vdCBhc3NpZ25lZCB0byBhIGZsaWdodGAgfSxcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IHN1bW1hcnkgPSB7IHRvdGFsQ2hlY2tzOiBjaGVja3MubGVuZ3RoLCBwYXNzZWQ6IGNoZWNrcy5maWx0ZXIoYyA9PiBjLnN0YXR1cyA9PT0gJ3Bhc3MnKS5sZW5ndGgsIHdhcm5pbmdzOiBjaGVja3MuZmlsdGVyKGMgPT4gYy5zdGF0dXMgPT09ICd3YXJuaW5nJykubGVuZ3RoLCBmYWlsZWQ6IGNoZWNrcy5maWx0ZXIoYyA9PiBjLnN0YXR1cyA9PT0gJ2ZhaWwnKS5sZW5ndGggfTtcclxuICAgICAgICByZXR1cm4ganNvblJlc3BvbnNlKHsgY2hlY2tzLCBzdW1tYXJ5IH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBSZXBvcnRzXHJcbiAgICAgIGlmIChwYXRoID09PSAnL21ha2Utc2VydmVyLTczYTM4NzFmL2F0dGVuZGFuY2UvcmVwb3J0cycgJiYgbWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgICAgIGNvbnN0IGF0dGVuZGFuY2UgPSBzdG9yZS5hdHRlbmRhbmNlO1xyXG4gICAgICAgIGNvbnN0IGNhZGV0U3VtbWFyeTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xyXG4gICAgICAgIGF0dGVuZGFuY2UuZm9yRWFjaChyZWMgPT4ge1xyXG4gICAgICAgICAgY29uc3QgayA9IHJlYy5jYWRldE5hbWU7XHJcbiAgICAgICAgICBjYWRldFN1bW1hcnlba10gPSBjYWRldFN1bW1hcnlba10gfHwgeyBjYWRldE5hbWU6IHJlYy5jYWRldE5hbWUsIGZsaWdodDogcmVjLmZsaWdodCwgdG90YWxQcmVzZW50OiAwLCB0b3RhbEF1dGhvcmlzZWRBYnNlbmNlOiAwLCB0b3RhbEFic2VudDogMCwgdG90YWxSZWNvcmRzOiAwIH07XHJcbiAgICAgICAgICBjYWRldFN1bW1hcnlba10udG90YWxSZWNvcmRzKys7XHJcbiAgICAgICAgICBpZiAocmVjLnN0YXR1cyA9PT0gJ3ByZXNlbnQnKSBjYWRldFN1bW1hcnlba10udG90YWxQcmVzZW50Kys7XHJcbiAgICAgICAgICBlbHNlIGlmIChyZWMuc3RhdHVzID09PSAnYXV0aG9yaXNlZF9hYnNlbmNlJykgY2FkZXRTdW1tYXJ5W2tdLnRvdGFsQXV0aG9yaXNlZEFic2VuY2UrKztcclxuICAgICAgICAgIGVsc2UgaWYgKHJlYy5zdGF0dXMgPT09ICdhYnNlbnQnKSBjYWRldFN1bW1hcnlba10udG90YWxBYnNlbnQrKztcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdW1tYXJ5ID0gT2JqZWN0LnZhbHVlcyhjYWRldFN1bW1hcnkpLm1hcCgoYzogYW55KSA9PiAoeyAuLi5jLCBhdHRlbmRhbmNlUmF0ZTogYy50b3RhbFJlY29yZHMgPiAwID8gTWF0aC5yb3VuZCgoYy50b3RhbFByZXNlbnQgLyBjLnRvdGFsUmVjb3JkcykgKiAxMDApIDogMCB9KSk7XHJcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB7XHJcbiAgICAgICAgICB0b3RhbFByZXNlbnQ6IHN1bW1hcnkucmVkdWNlKChzOiBudW1iZXIsIGM6IGFueSkgPT4gcyArIGMudG90YWxQcmVzZW50LCAwKSxcclxuICAgICAgICAgIHRvdGFsQXV0aG9yaXNlZEFic2VuY2U6IHN1bW1hcnkucmVkdWNlKChzOiBudW1iZXIsIGM6IGFueSkgPT4gcyArIGMudG90YWxBdXRob3Jpc2VkQWJzZW5jZSwgMCksXHJcbiAgICAgICAgICB0b3RhbEFic2VudDogc3VtbWFyeS5yZWR1Y2UoKHM6IG51bWJlciwgYzogYW55KSA9PiBzICsgYy50b3RhbEFic2VudCwgMCksXHJcbiAgICAgICAgICBhdmVyYWdlQXR0ZW5kYW5jZVJhdGU6IHN1bW1hcnkubGVuZ3RoID4gMCA/IE1hdGgucm91bmQoc3VtbWFyeS5yZWR1Y2UoKHM6IG51bWJlciwgYzogYW55KSA9PiBzICsgYy5hdHRlbmRhbmNlUmF0ZSwgMCkgLyBzdW1tYXJ5Lmxlbmd0aCkgOiAwLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGpzb25SZXNwb25zZSh7IHN1bW1hcnksIHN0YXRzIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBEZWZhdWx0OiBub3QgZm91bmQgZm9yIHVuaW1wbGVtZW50ZWQgcm91dGVzXHJcbiAgICAgIHJldHVybiBub3RGb3VuZCgnTG9jYWwgbW9kZSByb3V0ZSBub3QgaW1wbGVtZW50ZWQ6ICcgKyBwYXRoKTtcclxuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdMb2NhbCBtb2RlIGhhbmRsZXIgZXJyb3InLCBlKTtcclxuICAgICAgcmV0dXJuIGpzb25SZXNwb25zZSh7IGVycm9yOiBTdHJpbmcoZT8ubWVzc2FnZSB8fCBlKSB9LCA1MDApO1xyXG4gICAgfVxyXG4gIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInByb2plY3RJZCIsInJlYWRTdG9yZSIsIndyaXRlU3RvcmUiLCJ1dWlkIiwianNvblJlc3BvbnNlIiwib2JqIiwiaW5pdCIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXR1cyIsImhlYWRlcnMiLCJub3RGb3VuZCIsIm1zZyIsImVycm9yIiwiYmFkUmVxdWVzdCIsInVuYXV0aG9yaXplZCIsImVuYWJsZUxvY2FsTW9kZSIsIndpbmRvdyIsImZldGNoIiwiYmFzZSIsIm9yaWdpbmFsRmV0Y2giLCJiaW5kIiwiaW5wdXQiLCJ1cmwiLCJ0b1N0cmluZyIsInN0YXJ0c1dpdGgiLCJ1IiwiVVJMIiwicGF0aCIsInBhdGhuYW1lIiwicmVwbGFjZSIsIm1ldGhvZCIsInRvVXBwZXJDYXNlIiwiYm9keSIsInBhcnNlIiwidW5kZWZpbmVkIiwic3RvcmUiLCJjYWRldHMiLCJuYW1lIiwiam9pbkRhdGUiLCJmbGlnaHQiLCJjYWRldCIsImlkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY3JlYXRlZEF0IiwicHVzaCIsImNhZGV0TWF0Y2giLCJtYXRjaCIsImlkeCIsImZpbmRJbmRleCIsImMiLCJzcGxpY2UiLCJzdWNjZXNzIiwidXBkYXRlZCIsInVwZGF0ZWRBdCIsInBvaW50cyIsInNvcnQiLCJhIiwiYiIsImRhdGUiLCJnZXRUaW1lIiwiY2FkZXROYW1lIiwicmVhc29uIiwidHlwZSIsInBvaW50IiwicG9pbnRNYXRjaCIsInAiLCJuZXdQb2ludHMiLCJhdHRlbmRhbmNlIiwiYnVsa0lkIiwiYXR0IiwicHQiLCJhdHRNYXRjaCIsImVudHJpZXMiLCJmbGlnaHRGaWx0ZXIiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJwcmVzZW50Q291bnQiLCJlIiwiYnVsayIsInRvdGFsUmVjb3JkcyIsInRvdGFsUHJlc2VudCIsImF0dGVuZGFuY2VCdWxrcyIsImJ1bGtzIiwiYnVsa01hdGNoIiwiZmlsdGVyIiwiY2FkZXRUb3RhbHMiLCJmb3JFYWNoIiwiZmxpZ2h0VG90YWxzIiwiY2FkZXRMZWFkZXJib2FyZCIsIk9iamVjdCIsIm1hcCIsInB0cyIsImZsaWdodExlYWRlcmJvYXJkIiwicmVjZW50UG9pbnRzIiwic2xpY2UiLCJ3aW5uaW5nQ2FkZXQiLCJ3aW5uaW5nRmxpZ2h0IiwiY2FkZXROYW1lcyIsIlNldCIsInRvTG93ZXJDYXNlIiwiaW52YWxpZFBvaW50cyIsImhhcyIsImludmFsaWRBdHRlbmRhbmNlIiwidG90YWxQb2ludHNHaXZlbiIsInJlZHVjZSIsInMiLCJ0b3RhbFBvaW50c0NhbGN1bGF0ZWQiLCJ2YWx1ZXMiLCJ2IiwibmFtZUNvdW50cyIsImsiLCJkdXBsaWNhdGVzIiwibiIsImF0dGVuZGFuY2VDYWRldHMiLCJhdHRlbmRhbmNlUG9pbnRzIiwib3JwaGFuZWRQb2ludHMiLCJjYWRldHNXaXRob3V0RmxpZ2h0IiwidHJpbSIsImNoZWNrcyIsIm1lc3NhZ2UiLCJzdW1tYXJ5IiwidG90YWxDaGVja3MiLCJwYXNzZWQiLCJ3YXJuaW5ncyIsImZhaWxlZCIsImNhZGV0U3VtbWFyeSIsInJlYyIsInRvdGFsQXV0aG9yaXNlZEFic2VuY2UiLCJ0b3RhbEFic2VudCIsImF0dGVuZGFuY2VSYXRlIiwiTWF0aCIsInJvdW5kIiwic3RhdHMiLCJhdmVyYWdlQXR0ZW5kYW5jZVJhdGUiLCJjb25zb2xlIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/localApiShim.ts\n");

/***/ }),

/***/ "(ssr)/./src/utils/localStore.ts":
/*!*********************************!*\
  !*** ./src/utils/localStore.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   readStore: () => (/* binding */ readStore),\n/* harmony export */   uuid: () => (/* binding */ uuid),\n/* harmony export */   writeStore: () => (/* binding */ writeStore)\n/* harmony export */ });\nconst KEY = \"localStore_73a3871f_v1\";\nfunction readStore() {\n    const raw = localStorage.getItem(KEY);\n    if (!raw) return {\n        cadets: [],\n        points: [],\n        attendance: [],\n        attendanceBulks: []\n    };\n    try {\n        const parsed = JSON.parse(raw);\n        return {\n            cadets: [],\n            points: [],\n            attendance: [],\n            attendanceBulks: [],\n            ...parsed\n        };\n    } catch  {\n        return {\n            cadets: [],\n            points: [],\n            attendance: [],\n            attendanceBulks: []\n        };\n    }\n}\nfunction writeStore(store) {\n    localStorage.setItem(KEY, JSON.stringify(store));\n}\nfunction uuid() {\n    return crypto?.randomUUID ? crypto.randomUUID() : Math.random().toString(36).slice(2) + Date.now().toString(36);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvdXRpbHMvbG9jYWxTdG9yZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFZQSxNQUFNQSxNQUFNO0FBRUwsU0FBU0M7SUFDZCxNQUFNQyxNQUFNQyxhQUFhQyxPQUFPLENBQUNKO0lBQ2pDLElBQUksQ0FBQ0UsS0FBSyxPQUFPO1FBQUVHLFFBQVEsRUFBRTtRQUFFQyxRQUFRLEVBQUU7UUFBRUMsWUFBWSxFQUFFO1FBQUVDLGlCQUFpQixFQUFFO0lBQUM7SUFDL0UsSUFBSTtRQUNGLE1BQU1DLFNBQVNDLEtBQUtDLEtBQUssQ0FBQ1Q7UUFDMUIsT0FBTztZQUFFRyxRQUFRLEVBQUU7WUFBRUMsUUFBUSxFQUFFO1lBQUVDLFlBQVksRUFBRTtZQUFFQyxpQkFBaUIsRUFBRTtZQUFFLEdBQUdDLE1BQU07UUFBQztJQUNsRixFQUFFLE9BQU07UUFDTixPQUFPO1lBQUVKLFFBQVEsRUFBRTtZQUFFQyxRQUFRLEVBQUU7WUFBRUMsWUFBWSxFQUFFO1lBQUVDLGlCQUFpQixFQUFFO1FBQUM7SUFDdkU7QUFDRjtBQUVPLFNBQVNJLFdBQVdDLEtBQVk7SUFDckNWLGFBQWFXLE9BQU8sQ0FBQ2QsS0FBS1UsS0FBS0ssU0FBUyxDQUFDRjtBQUMzQztBQUVPLFNBQVNHO0lBQ2QsT0FBT0MsUUFBUUMsYUFBYUQsT0FBT0MsVUFBVSxLQUFLQyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxLQUFLLENBQUMsS0FBS0MsS0FBS0MsR0FBRyxHQUFHSCxRQUFRLENBQUM7QUFDOUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZmlnbWEvbXktbWFrZS1maWxlLy4vc3JjL3V0aWxzL2xvY2FsU3RvcmUudHM/ZWY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIENhZGV0ID0geyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmc7IGZsaWdodDogc3RyaW5nOyBqb2luRGF0ZT86IHN0cmluZzsgY3JlYXRlZEF0Pzogc3RyaW5nOyB1cGRhdGVkQXQ/OiBzdHJpbmcgfTtcclxudHlwZSBQb2ludCA9IHsgaWQ6IHN0cmluZzsgY2FkZXROYW1lOiBzdHJpbmc7IGRhdGU6IHN0cmluZzsgZmxpZ2h0OiBzdHJpbmc7IHJlYXNvbjogc3RyaW5nOyBwb2ludHM6IG51bWJlcjsgdHlwZTogc3RyaW5nOyBnaXZlbkJ5Pzogc3RyaW5nOyBjcmVhdGVkQXQ/OiBzdHJpbmc7IHVwZGF0ZWRBdD86IHN0cmluZyB9O1xyXG50eXBlIEF0dGVuZGFuY2UgPSB7IGlkOiBzdHJpbmc7IGNhZGV0TmFtZTogc3RyaW5nOyBkYXRlOiBzdHJpbmc7IGZsaWdodDogc3RyaW5nOyBzdGF0dXM6ICdwcmVzZW50JyB8ICdhdXRob3Jpc2VkX2Fic2VuY2UnIHwgJ2Fic2VudCc7IHN1Ym1pdHRlZEJ5Pzogc3RyaW5nOyBidWxrSWQ/OiBzdHJpbmcgfCBudWxsOyBjcmVhdGVkQXQ/OiBzdHJpbmcgfTtcclxudHlwZSBBdHRlbmRhbmNlQnVsayA9IHsgaWQ6IHN0cmluZzsgZGF0ZTogc3RyaW5nOyBmbGlnaHRGaWx0ZXI6IHN0cmluZzsgdG90YWxSZWNvcmRzOiBudW1iZXI7IHRvdGFsUHJlc2VudDogbnVtYmVyOyBzdWJtaXR0ZWRCeT86IHN0cmluZzsgY3JlYXRlZEF0Pzogc3RyaW5nIH07XHJcblxyXG50eXBlIFN0b3JlID0ge1xyXG4gIGNhZGV0czogQ2FkZXRbXTtcclxuICBwb2ludHM6IFBvaW50W107XHJcbiAgYXR0ZW5kYW5jZTogQXR0ZW5kYW5jZVtdO1xyXG4gIGF0dGVuZGFuY2VCdWxrczogQXR0ZW5kYW5jZUJ1bGtbXTtcclxufTtcclxuXHJcbmNvbnN0IEtFWSA9ICdsb2NhbFN0b3JlXzczYTM4NzFmX3YxJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkU3RvcmUoKTogU3RvcmUge1xyXG4gIGNvbnN0IHJhdyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKEtFWSk7XHJcbiAgaWYgKCFyYXcpIHJldHVybiB7IGNhZGV0czogW10sIHBvaW50czogW10sIGF0dGVuZGFuY2U6IFtdLCBhdHRlbmRhbmNlQnVsa3M6IFtdIH07XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KTtcclxuICAgIHJldHVybiB7IGNhZGV0czogW10sIHBvaW50czogW10sIGF0dGVuZGFuY2U6IFtdLCBhdHRlbmRhbmNlQnVsa3M6IFtdLCAuLi5wYXJzZWQgfSBhcyBTdG9yZTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiB7IGNhZGV0czogW10sIHBvaW50czogW10sIGF0dGVuZGFuY2U6IFtdLCBhdHRlbmRhbmNlQnVsa3M6IFtdIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd3JpdGVTdG9yZShzdG9yZTogU3RvcmUpIHtcclxuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShLRVksIEpTT04uc3RyaW5naWZ5KHN0b3JlKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1dWlkKCkge1xyXG4gIHJldHVybiBjcnlwdG8/LnJhbmRvbVVVSUQgPyBjcnlwdG8ucmFuZG9tVVVJRCgpIDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMikgKyBEYXRlLm5vdygpLnRvU3RyaW5nKDM2KTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgeyBDYWRldCwgUG9pbnQsIEF0dGVuZGFuY2UsIEF0dGVuZGFuY2VCdWxrLCBTdG9yZSB9O1xyXG4iXSwibmFtZXMiOlsiS0VZIiwicmVhZFN0b3JlIiwicmF3IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNhZGV0cyIsInBvaW50cyIsImF0dGVuZGFuY2UiLCJhdHRlbmRhbmNlQnVsa3MiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJ3cml0ZVN0b3JlIiwic3RvcmUiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXVpZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSIsIkRhdGUiLCJub3ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/utils/localStore.ts\n");

/***/ })

};
;